# Internationalisation (i18n)

Support multilingue complet du frontend Ackify.

## Langues SupportÃ©es

- ğŸ‡«ğŸ‡· **FranÃ§ais** (par dÃ©faut)
- ğŸ‡¬ğŸ‡§ **English** (fallback)
- ğŸ‡ªğŸ‡¸ **EspaÃ±ol**
- ğŸ‡©ğŸ‡ª **Deutsch**
- ğŸ‡®ğŸ‡¹ **Italiano**

## Frontend (Vue.js)

### SÃ©lection de Langue

Le frontend dÃ©tecte automatiquement la langue via :

1. **localStorage** - Choix utilisateur sauvegardÃ©
2. **navigator.language** - Langue du navigateur
3. **Fallback** - English si non supportÃ©e

### Switcher de Langue

Interface utilisateur avec drapeaux Unicode :

```
ğŸ‡«ğŸ‡· FR | ğŸ‡¬ğŸ‡§ EN | ğŸ‡ªğŸ‡¸ ES | ğŸ‡©ğŸ‡ª DE | ğŸ‡®ğŸ‡¹ IT
```

Clic â†’ Langue change + sauvegarde dans localStorage

### Fichiers de Traduction

LocalisÃ©s dans `/webapp/src/locales/` :

```
locales/
â”œâ”€â”€ fr.json    # FranÃ§ais
â”œâ”€â”€ en.json    # English
â”œâ”€â”€ es.json    # EspaÃ±ol
â”œâ”€â”€ de.json    # Deutsch
â””â”€â”€ it.json    # Italiano
```

### Structure JSON

```json
{
  "home": {
    "title": "Ackify - Proof of Read",
    "subtitle": "Signatures cryptographiques de lecture"
  },
  "document": {
    "sign": "Signer ce document",
    "signed": "Document signÃ©",
    "signatures": "{count} confirmation | {count} confirmations"
  }
}
```

**Pluralisation** :
```json
"signatures": "{count} confirmation | {count} confirmations"
```

Usage :
```vue
{{ $t('document.signatures', { count: 42 }) }}
// â†’ "42 confirmations"
```

## Backend (Go)

### Templates Email

Les emails utilisent des templates multilingues dans `/backend/templates/emails/` :

```
templates/emails/
â”œâ”€â”€ fr/
â”‚   â”œâ”€â”€ reminder.html
â”‚   â””â”€â”€ reminder.txt
â”œâ”€â”€ en/
â”‚   â”œâ”€â”€ reminder.html
â”‚   â””â”€â”€ reminder.txt
â”œâ”€â”€ es/...
â”œâ”€â”€ de/...
â””â”€â”€ it/...
```

### Envoi avec Locale

```http
POST /api/v1/admin/documents/doc_id/reminders
Content-Type: application/json

{
  "emails": ["user@company.com"],
  "locale": "fr"
}
```

Le backend charge le template `fr/reminder.html`.

### Configuration

```bash
# Langue par dÃ©faut pour les emails (dÃ©faut: en)
ACKIFY_MAIL_DEFAULT_LOCALE=fr
```

## Ajouter une Langue

### Frontend

1. **CrÃ©er le fichier de traduction** :

```bash
cd webapp/src/locales
cp en.json pt.json  # Portugais
```

2. **Traduire** :

```json
{
  "home": {
    "title": "Ackify - Prova de Leitura",
    "subtitle": "Assinaturas criptogrÃ¡ficas de leitura"
  }
}
```

3. **Enregistrer dans i18n** :

```typescript
// webapp/src/i18n.ts
import pt from './locales/pt.json'

const i18n = createI18n({
  locale: 'fr',
  fallbackLocale: 'en',
  messages: {
    fr, en, es, de, it,
    pt  // Ajouter ici
  }
})
```

4. **Ajouter au sÃ©lecteur** :

```vue
<!-- components/LanguageSwitcher.vue -->
<button @click="changeLocale('pt')">ğŸ‡µğŸ‡¹ PT</button>
```

### Backend

1. **CrÃ©er le rÃ©pertoire** :

```bash
mkdir -p backend/templates/emails/pt
```

2. **CrÃ©er les templates** :

```bash
cp backend/templates/emails/en/reminder.html backend/templates/emails/pt/
cp backend/templates/emails/en/reminder.txt backend/templates/emails/pt/
```

3. **Traduire les templates**

4. **Rebuild** :

```bash
docker compose up -d --force-recreate ackify-ce --build
```

## VÃ©rification i18n

### Script de Validation

Le projet inclut un script pour vÃ©rifier la complÃ©tude des traductions :

```bash
cd webapp
npm run lint:i18n
```

**Output** :
```
âœ… fr.json - 156 keys
âœ… en.json - 156 keys
âœ… es.json - 156 keys
âœ… de.json - 156 keys
âœ… it.json - 156 keys

All translations are complete!
```

### CI/CD

Le script s'exÃ©cute automatiquement dans GitHub Actions pour bloquer les PRs avec traductions manquantes.

## Bonnes Pratiques

### ClÃ©s de Traduction

- âœ… Utiliser des clÃ©s structurÃ©es : `feature.action.label`
- âœ… Grouper par page/composant
- âœ… Ã‰viter les clÃ©s trop gÃ©nÃ©riques (`button`, `title`)
- âœ… Utiliser des placeholders : `{count}`, `{name}`

**Exemple** :
```json
{
  "admin": {
    "documents": {
      "list": {
        "title": "Liste des documents",
        "count": "{count} document | {count} documents"
      }
    }
  }
}
```

### Synchronisation

Lors de l'ajout de nouvelles clÃ©s en franÃ§ais :

```bash
# Sync script (Ã  crÃ©er)
node scripts/sync-i18n-from-fr.js
```

Copie automatiquement les nouvelles clÃ©s vers les autres langues avec `[TODO]`.

### Textes Longs

Pour les textes longs, utiliser des arrays :

```json
{
  "help": {
    "intro": [
      "Ackify permet de crÃ©er des signatures cryptographiques.",
      "Chaque signature est horodatÃ©e et non-rÃ©pudiable.",
      "Les donnÃ©es sont stockÃ©es de maniÃ¨re immuable."
    ]
  }
}
```

Usage :
```vue
<p v-for="line in $tm('help.intro')" :key="line">
  {{ line }}
</p>
```

## Formats SpÃ©cifiques

### Dates

```typescript
// Formater avec la locale courante
import { useI18n } from 'vue-i18n'

const { locale } = useI18n()
const formatted = new Date().toLocaleDateString(locale.value, {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
})
// fr: "15 janvier 2025"
// en: "January 15, 2025"
```

### Nombres

```typescript
const formatted = (42000).toLocaleString(locale.value)
// fr: "42 000"
// en: "42,000"
```

## SEO & Meta Tags

Les meta tags sont traduits dynamiquement :

```vue
<script setup>
import { useI18n } from 'vue-i18n'
import { useHead } from '@vueuse/head'

const { t } = useI18n()

useHead({
  title: t('home.title'),
  meta: [
    { name: 'description', content: t('home.description') }
  ]
})
</script>
```

## Documentation ComplÃ¨te

Pour plus de dÃ©tails sur l'implÃ©mentation i18n du frontend, voir :

**[webapp/I18N.md](../../webapp/I18N.md)**

Ce fichier contient :
- Architecture complÃ¨te vue-i18n
- Guide de contribution
- Scripts de synchronisation
- Exemples avancÃ©s
