# ==========================================
# Ackify Community Edition Configuration
# ==========================================

# ==========================================
# Application Configuration
# ==========================================
APP_BASE_URL=https://your-domain.com
APP_ORGANISATION="Your Organization Name"

# ==========================================
# Database Configuration
# ==========================================
POSTGRES_USER=ackifyr
POSTGRES_PASSWORD=your_secure_password
POSTGRES_DB=ackify

# ==========================================
# Security Configuration (Auto-generated)
# ==========================================
# Generate with: openssl rand -base64 32
OAUTH_COOKIE_SECRET=your_base64_encoded_secret_key

# Generate with: openssl rand 64 | base64 -w 0
ED25519_PRIVATE_KEY_B64=your_base64_encoded_ed25519_private_key

# ==========================================
# Server Configuration
# ==========================================
LISTEN_ADDR=:8080

# ==========================================
# OAuth2 Authentication Configuration
# ==========================================
# At least ONE authentication method (OAuth or MagicLink) must be enabled

# Provider: google, github, gitlab, or leave empty for custom
OAUTH_PROVIDER=google

# OAuth Client Credentials
OAUTH_CLIENT_ID=your_oauth_client_id
OAUTH_CLIENT_SECRET=your_oauth_client_secret

# Optional: Restrict to specific email domain (e.g., @company.com)
# OAUTH_ALLOWED_DOMAIN=@your-organization.com

# Optional: Auto-login if OAuth session exists (default: false)
# OAUTH_AUTO_LOGIN=true

# Optional: Custom OAuth provider configuration (only if OAUTH_PROVIDER is empty)
# OAUTH_AUTH_URL=https://your-provider.com/oauth/authorize
# OAUTH_TOKEN_URL=https://your-provider.com/oauth/token
# OAUTH_USERINFO_URL=https://your-provider.com/api/user
# OAUTH_SCOPES=openid,email,profile

# Optional: Self-hosted GitLab URL (only if OAUTH_PROVIDER=gitlab)
# OAUTH_GITLAB_URL=https://gitlab.your-company.com

# Optional: Custom logout URL
# OAUTH_LOGOUT_URL=https://your-provider.com/logout

# Optional: Force enable/disable OAuth (auto-detected by default)
# AUTH_OAUTH_ENABLED=true

# ==========================================
# SMTP Configuration (Email Service)
# ==========================================
# SMTP is used for:
# - Sending signature reminders to expected signers
# - MagicLink authentication (passwordless email login)

# SMTP Server Configuration
# MAIL_HOST=smtp.gmail.com
# MAIL_PORT=587
# MAIL_USERNAME=your-smtp-username
# MAIL_PASSWORD=your-smtp-password

# Email Sender Configuration
# MAIL_FROM=noreply@your-domain.com
# MAIL_FROM_NAME=Your Organization Name

# SMTP Security Settings
# MAIL_TLS=true
# MAIL_STARTTLS=true
# MAIL_TIMEOUT=10s

# Email Template Configuration
# MAIL_TEMPLATE_DIR=templates/emails
# MAIL_DEFAULT_LOCALE=en
# MAIL_SUBJECT_PREFIX=[Ackify]

# ==========================================
# MagicLink Authentication Configuration
# ==========================================
# MagicLink provides passwordless authentication via email
# Auto-enabled when MAIL_HOST is configured

# Optional: Force disable MagicLink even if SMTP is configured
# AUTH_MAGICLINK_ENABLED=false

# ==========================================
# Admin Configuration
# ==========================================
# Comma-separated list of admin email addresses
# Admins have access to document management and reminder features
# ADMIN_EMAILS=admin@your-domain.com,admin2@your-domain.com

# ==========================================
# CONFIGURATION INSTRUCTIONS
# ==========================================

# 1. Run the interactive installation script:
#    bash <(curl -fsSL https://raw.githubusercontent.com/btouchard/ackify-ce/main/install/install.sh)

# 2. Or manually generate secure secrets:
#    OAUTH_COOKIE_SECRET=$(openssl rand -base64 32)
#    ED25519_PRIVATE_KEY_B64=$(openssl rand 64 | base64 -w 0)

# 3. OAuth2 Provider Setup:
#    GOOGLE:    Create OAuth credentials at https://console.cloud.google.com/
#    GITHUB:    Create OAuth app at https://github.com/settings/developers
#    GITLAB:    Create OAuth app at https://gitlab.com/-/profile/applications
#    CUSTOM:    Use your own OAuth provider with custom URLs

# 4. SMTP Setup (for email reminders and MagicLink):
#    GMAIL:     Use App Password from https://myaccount.google.com/apppasswords
#    SMTP2GO:   Get credentials from https://www.smtp2go.com/
#    SendGrid:  Use API key from https://app.sendgrid.com/settings/api_keys
#    Mailgun:   Get credentials from https://app.mailgun.com/

# 5. Authentication Methods:
#    - OAuth: Requires OAUTH_CLIENT_ID and OAUTH_CLIENT_SECRET
#    - MagicLink: Requires MAIL_HOST configuration
#    - At least ONE method must be enabled

# 6. Start Ackify:
#    docker compose up -d